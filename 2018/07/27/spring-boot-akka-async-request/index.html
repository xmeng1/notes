<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Akka,Actor,Spring-Boot," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="摘要：本文主要介绍两个问题，一个是 Spring 和 AKKA 的集成，另一个是如何使用 Spring 异步请求。最后结合两点，设计一个简单的场景。">
<meta name="keywords" content="Akka,Actor,Spring-Boot">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Boot 集成 Akka 并是实现异步请求">
<meta property="og:url" content="https://notes.mengxin.science/2018/07/27/spring-boot-akka-async-request/index.html">
<meta property="og:site_name" content="Xin&#39;s Notes">
<meta property="og:description" content="摘要：本文主要介绍两个问题，一个是 Spring 和 AKKA 的集成，另一个是如何使用 Spring 异步请求。最后结合两点，设计一个简单的场景。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2021-12-21T09:52:36.032Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Spring Boot 集成 Akka 并是实现异步请求">
<meta name="twitter:description" content="摘要：本文主要介绍两个问题，一个是 Spring 和 AKKA 的集成，另一个是如何使用 Spring 异步请求。最后结合两点，设计一个简单的场景。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'LRRR8WO27T',
      apiKey: '52f38cdd494149d36c3b9a986a36836c',
      indexName: 'prod_notes',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://notes.mengxin.science/2018/07/27/spring-boot-akka-async-request/"/>





  <title> Spring Boot 集成 Akka 并是实现异步请求 | Xin's Notes </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-40931165-6', 'auto');
  ga('send', 'pageview');
</script>











  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Xin's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Develop Notes</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'zh-CN', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, multilanguagePage: true, gaTrack: true, gaId: 'UA-40931165-7'}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://notes.mengxin.science/2018/07/27/spring-boot-akka-async-request/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xin Meng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar-2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xin's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                Spring Boot 集成 Akka 并是实现异步请求
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-27T23:00:00+00:00">
                2018-07-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/知识积累/" itemprop="url" rel="index">
                    <span itemprop="name">知识积累</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/07/27/spring-boot-akka-async-request/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/07/27/spring-boot-akka-async-request/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>摘要：本文主要介绍两个问题，一个是 <code>Spring</code> 和 <code>AKKA</code> 的集成，另一个是如何使用 <code>Spring</code> 异步请求。最后结合两点，设计一个简单的场景。</p>
<a id="more"></a>
<h1 id="Spring-集成-AKKA"><a href="#Spring-集成-AKKA" class="headerlink" title="Spring 集成 AKKA"></a><code>Spring</code> 集成 <code>AKKA</code></h1><p>首先我们需要在 <code>Spring</code> 中集成 <code>AKKA</code>。目前有若干篇博文介绍该方法，基本思路都是一致的，就是通过 <code>AKKA</code> 的 <code>Extension</code> 机制将 <code>AKKA</code> 的 <code>Actor</code> 注入到 <code>Spring</code> 的 <code>IoC</code> 容器中。然后通过 <code>依赖注入</code> 来使用 <code>Actor</code>。</p>
<p>参考博文：</p>
<p><a href="http://www.baeldung.com/akka-with-spring" target="_blank" rel="noopener">Introduction to Spring with Akka</a>：该文章比较详细的介绍了配置过程<br><a href="https://www.linkedin.com/pulse/spring-boot-akka-part-1-aliaksandr-liakh/" target="_blank" rel="noopener">Spring-boot-akka-part1</a> &amp; <a href="https://www.linkedin.com/pulse/spring-boot-akka-part-2-aliaksandr-liakh/" target="_blank" rel="noopener">part2</a>：该文章分两部分，除了介绍配置过程，另外还介绍了使用其进行异步调用。</p>
<p>以上两篇文章都是在 <code>Spring</code> 的配置中，配置系统级别的 <code>Actor</code>，然后在 <code>Client</code> 代码中创建新的 <code>Actor</code>。</p>
<p>另外一篇文章 <a href="https://ingini.org/2012/08/05/akka-actor-dependency-injection-using-spring/" target="_blank" rel="noopener">AKKA Actor Dependency Injection Using Spring</a>，虽然文章比较老，但是该文章完全自己实现了注入的过程，没有依赖于 <code>Extension</code>，同时其配置也将业务层的 <code>Actor</code> 一同配置。</p>
<p>本文集合上面三篇文章进行说明，使用 <code>Extension</code> 机制，同时配置业务层 <code>Actor</code>，然后在其他地方全部使用注入方式来访问 <code>Actore</code>。</p>
<h2 id="依赖注入简介"><a href="#依赖注入简介" class="headerlink" title="依赖注入简介"></a>依赖注入简介</h2><p><code>[Akka](http://akka.io/)</code> 是一个基于 <code>Actor</code> 并发模型的功能强大的应用程序框架。这个框架是用 <code>Scala</code> 编写的，当然它也可以在基于 <code>java</code> 的应用程序中完全使用。因此，我们常常希望将<code>Akka</code> 集成到现有的基于 <code>Spring</code> 的应用程序中，或者简单地使用 <code>Spring</code> 将 <code>bean</code> 连接到 <code>actor</code> 中。</p>
<p><code>Spring/Akka</code> 集成的问题在于 <code>Spring</code> 中的 <code>bean</code> 管理与 <code>Akka</code> 中的 <code>actor</code> 管理之间的差异: <code>actor</code> 具有与典型 <code>Spring bean</code> 生命周期不同的特定生命周期。<br>此外，参与者被分割为参与者本身(这是一个内部实现细节，<code>Spring</code> 无法管理)和参与者引用(可由客户端代码访问)，以及可序列化和可移植的不同 <code>Akka</code> 运行时。</p>
<p>幸运的是，<code>Akka</code> 提供了一个机制，即 <a href="http://doc.akka.io/docs/akka/current/java/extending-akka.html" target="_blank" rel="noopener"><code>Akka</code> 扩展</a> ，这使得使用外部依赖注入框架成为一项相当简单的任务。</p>
<h2 id="maven-依赖"><a href="#maven-依赖" class="headerlink" title="maven 依赖"></a><code>maven</code> 依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>4.3.1.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">akka.version</span>&gt;</span>2.5.14<span class="tag">&lt;/<span class="name">akka.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.typesafe.akka<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>akka-actor_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;akka.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果使用 <code>Spring Boot</code> 则无需 <code>spring-context</code> 依赖。<code>akka</code> 的版本可以自行更新，如果有 <code>breaking change</code> 需要注意，可能本文不兼容。</p>
<h2 id="将-ActorSystem-集成到-Spring-ApplicationContext中"><a href="#将-ActorSystem-集成到-Spring-ApplicationContext中" class="headerlink" title="将 ActorSystem 集成到 Spring ApplicationContext中"></a>将 <code>ActorSystem</code> 集成到 <code>Spring ApplicationContext</code>中</h2><p>将 <code>Spring Been</code> 注入到 <code>Akka Actors</code></p>
<h3 id="构造-SpringActorProducer"><a href="#构造-SpringActorProducer" class="headerlink" title="构造 SpringActorProducer"></a>构造 <code>SpringActorProducer</code></h3><p> <code>SpringActorProducer</code> 的功能就是从 <code>ApplicationContext</code> 中以 <code>Spring Bean</code> 的形式通过名称来创建 <code>actors</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringActorProducer</span> <span class="keyword">implements</span> <span class="title">IndirectActorProducer</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> String beanActorName;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SpringActorProducer</span><span class="params">(ApplicationContext applicationContext, </span></span></span><br><span class="line"><span class="function"><span class="params">      String beanActorName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.applicationContext = applicationContext;</span><br><span class="line">        <span class="keyword">this</span>.beanActorName = beanActorName;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Actor <span class="title">produce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (Actor) applicationContext.getBean(beanActorName);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;? extends Actor&gt; actorClass() &#123;</span><br><span class="line">        <span class="keyword">return</span> (Class&lt;? extends Actor&gt;) applicationContext.getType(beanActorName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>IndirectActorProducer</code> 是 <code>akka</code> 提供的一个接口：</p>
<blockquote>
<p>This interface defines a class of actor creation strategies deviating from the usual default of just reflectively instantiating the Actor subclass. It can be used to allow a dependency injection framework to determine the actual actor class and how it shall be instantiated.</p>
</blockquote>
<p>这个接口定义了一个actor创建策略类，它偏离了通常的默认值，只是反射地实例化了 <code>actor</code> 子类。它可以用于允许依赖注入框架来确定实际的 <code>actor</code> 类以及如何实例化它。</p>
<p>其中 <code>produce</code> 方法用途：</p>
<blockquote>
<p>This factory method must produce a fresh actor instance upon each invocation. It is not permitted to return the same instance more than once.</p>
<p>这个工厂方法必须在每次调用时生成一个新的actor实例。不允许多次返回同一个实例。</p>
</blockquote>
<p><code>actorClass</code> 方法用途：</p>
<blockquote>
<p>This method is used by Props to determine the type of actor which will be created. This means that an instance of this IndirectActorProducer will be created in order to call this method during any call to Props.actorClass; it should be noted that such calls may performed during actor set-up before the actual actor’s instantiation, and that the instance created for calling actorClass is not necessarily reused later to produce the actor.</p>
<p>该方法被道具用来确定将要创建的参与者的类型。这意味着将创建这个IndirectActorProducer的实例，以便在调用Props.actorClass时调用该方法;应该注意的是，这样的调用可以在实际的actor实例化之前的actor设置期间执行，并且为调用actorClass而创建的实例并不一定要在以后重用以生成actor。</p>
</blockquote>
<p>通俗的讲，该类是让 <code>AKKA</code> 知道在你的应用环境中如何创建 <code>actor</code>，由于我们使用 <code>Spring</code>，所以所有的 <code>bean</code> 都应该在 <code>Spring</code> 的 <code>Context</code> 通过注册的名字获取。所以该类的构造函数注入了两个参数，一个是 <code>ApplicationContext</code>，另一个就是 <code>beanActorName</code>。然后实现接口并实现两个方法，一个方法是如何生成 <code>Actor</code>，根据 <code>Spring</code> 思想，就是通过 <code>bean</code> 的名称直接在 <code>Context</code> 进行查找。当然这里可以进一步扩展，比如 <code>bean</code> 有构造函数，需要传入参数，那么我们在多注入一个 <code>Object.. args</code>，然后通过名字加参数获取 <code>bean</code> 实例。（可以参考上面的文章 <a href="https://www.linkedin.com/pulse/spring-boot-akka-part-2-aliaksandr-liakh/" target="_blank" rel="noopener">part2</a> 的实例，代码如下）。理论上我们可以将任意的 <code>IoC</code> 容器注入到这个 <code>Producer</code> 中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringActorProducer</span> <span class="keyword">implements</span> <span class="title">IndirectActorProducer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">private</span> String actorBeanName;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">private</span> Object[] args;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SpringActorProducer</span><span class="params">(ApplicationContext applicationContext, String actorBeanName, Object... args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.applicationContext = applicationContext;</span><br><span class="line">        <span class="keyword">this</span>.actorBeanName = actorBeanName;</span><br><span class="line">        <span class="keyword">this</span>.args = args;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Actor <span class="title">produce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (args == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> (Actor) applicationContext.getBean(actorBeanName);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (Actor) applicationContext.getBean(actorBeanName, args);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;? extends Actor&gt; actorClass() &#123;</span><br><span class="line">        <span class="keyword">return</span> (Class&lt;? extends Actor&gt;) applicationContext.getType(actorBeanName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="创建-Spring-的-AKKA-扩展"><a href="#创建-Spring-的-AKKA-扩展" class="headerlink" title="创建 Spring 的 AKKA 扩展"></a>创建 <code>Spring</code> 的 <code>AKKA</code> 扩展</h3><p>什么是 <code>akka</code> 扩展？ 一个扩展就是每个参与者系统创建的单例实例。</p>
<blockquote>
<p>If you want to add features to Akka, there is a very elegant, but powerful mechanism for doing so. It’s called Akka Extensions and is comprised of 2 basic components: an Extension and an ExtensionId.</p>
<p>Extensions will only be loaded once per ActorSystem, which will be managed by Akka. You can choose to have your Extension loaded on-demand or at ActorSystem creation time through the Akka configuration. Details on how to make that happens are below, in the “Loading from Configuration” section.</p>
<p>如果想要为Akka添加特性，有一个非常优美而且强大的工具，称为 Akka 扩展。它由两部分组成： Extension 和 ExtensionId.</p>
<p>Extensions 在每个 ActorSystem 中只会加载一次, 并被Akka所管理。 你可以选择按需加载你的Extension或是在 ActorSystem 创建时通过Akka配置来加载。 关于这些细节，见下文 “从配置中加载” 的部分.</p>
<p>警告：由于扩展是hook到Akka自身的，所以扩展的实现者需要保证自己扩展的线程安全性。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringExtension</span> <span class="keyword">extends</span> <span class="title">AbstractExtensionId</span>&lt;<span class="title">SpringExtension</span>.<span class="title">SpringExt</span>&gt; </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> SpringExtension SPRING_EXTENSION_PROVIDER = <span class="keyword">new</span> SpringExtension();</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SpringExt <span class="title">createExtension</span><span class="params">(ExtendedActorSystem system)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SpringExt();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringExt</span> <span class="keyword">implements</span> <span class="title">Extension</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">volatile</span> ApplicationContext applicationContext;</span><br><span class="line"> </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(ApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.applicationContext = applicationContext;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="function"><span class="keyword">public</span> Props <span class="title">props</span><span class="params">(String actorBeanName)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Props.create(</span><br><span class="line">              SpringActorProducer.class, applicationContext, actorBeanName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>理解这个扩展，我们首先要理解什么是 <code>Props</code>，<code>Props</code> 实例是 <code>actor</code> 的蓝图，也就是说 <code>Props</code> 用于获取 <code>actore</code>。具体用法就是如果我们希望获取一个 actor，我们可以使用该方法来获取 <code>actorSystem.actorOf(props, actorName)</code>。 这里有点绕，因为我们的 <code>Props</code> 是通过 <code>SpringActorProducer</code> 获取的，我们为什么不直接用 <code>Producer</code> 来获取 <code>Actor</code> 呢？应该是为了抽象，<code>Props</code> 的创造方法有多种，这里只是其中的一种。</p>
<p>该扩展中定义了一个静态的成员变量，类型就是类本身，也就是<strong>维护本身的实例的引用</strong>。而其中的 <code>createExtension</code> 方法，如果阅读源码的话，可以发现是在注册 <code>extension</code> 的时候被调用。这个类应该是增加一个私有的构造函数，从而表明该类是一个单例。</p>
<p>该扩展的使用就是通过静态成员 <code>SPRING_EXTENSION_PROVIDER</code> 根据 <code>actor</code> 名字获取其 <code>Props</code>。<code>props</code> 方法每次需要使用 <code>Spring</code> 来管理 <code>actor</code> 的引用的时候，就需要调用方法。</p>
<h3 id="创建-Spring-配置类"><a href="#创建-Spring-配置类" class="headerlink" title="创建 Spring 配置类"></a>创建 <code>Spring</code> 配置类</h3><p>我们使用 <code>Java</code> 配置方法来配置 <code>Akka</code>。不同于前面两篇参考文章，本文配置了两个 <code>Actor</code>，一个全局的 <code>system actor</code>， 还配置了一个业务的 <code>actor</code>，这样我们在使用业务的 <code>actor</code> 的时候更加方便。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AkkaConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ACTOR_SYSTEM = <span class="string">"ACTOR_SYSTEM"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String LOGIN_ACTOR = <span class="string">"LOGIN_ACTOR"</span>;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ActorSystem actorSystem;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(name = ACTOR_SYSTEM)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ActorSystem <span class="title">actorSystem</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        actorSystem = ActorSystem.create(ACTOR_SYSTEM);</span><br><span class="line">        SPRING_EXTENSION_PROVIDER.get(actorSystem).initialize(applicationContext);</span><br><span class="line">        <span class="keyword">return</span> actorSystem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(name = LOGIN_ACTOR)</span><br><span class="line">    <span class="meta">@DependsOn</span>(&#123;ACTOR_SYSTEM&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ActorRef <span class="title">loginActor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> actorSystem</span><br><span class="line">            .actorOf(SPRING_EXTENSION_PROVIDER.get(actorSystem).props(<span class="string">"loginActor"</span>), LOGIN_ACTOR);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置方法很简洁，首先我们需要注入 <code>ApplicationContext</code>，这个 <code>context</code> 需要传入 <code>akka</code> 扩展方法。我们首先配置系统级别的 <code>actor</code>，先使用 <code>ActorSystem</code> 的静态方法来使用名字创建一个 <code>actor</code>，然后将该 <code>actor</code> 放入到当前的 <code>ApplicationContext</code> 中，最后返回 <code>ActorSystem</code> 的引用。</p>
<p>然后在 <code>ActorSystem</code> 基础上我们在配置一个业务的 <code>Actor</code>，我们前面提到过，如何通过 <code>Props</code> 获取 <code>Actor</code> 的引用。这里就是其使用场景。我们通过 <code>actorSystem.actorOf</code> 方法传入蓝图（<code>Props</code>）和名称来获取其实例。</p>
<p>至此就完成了 <code>AKKA</code> 和 <code>Spring</code> 的配置。</p>
<h2 id="Spring-使用-AKKA"><a href="#Spring-使用-AKKA" class="headerlink" title="Spring 使用 AKKA"></a><code>Spring</code> 使用 <code>AKKA</code></h2><p>使用 <code>AKKA</code> 重点在于需要理解 <code>actor</code> 的思想，很多文章介绍这方面的内容，比如<a href="https://segmentfault.com/a/1190000010112122#articleHeader6" target="_blank" rel="noopener">这篇</a>比较详细的介绍其设计思想。简单的将，<code>Actor</code> 就是一个消息的处理者，最常见的使用就是重载 <code>onReceive</code> 方法，然后根据消息的不同进行不同的处理，然后返回结果。在业务逻辑中，向相应功能的 <code>actor</code> 发送不同的消息。消息的发送和结果可以是异步的，比如我们执行一个比较费时的操作，这个操作可以放到<code>actor</code>，当执行该动作的消息发送到 <code>actor</code> 后，无需等待 <code>actor</code> 完成这个动作，而是先返回一个 <code>Future</code>，如果业务逻辑是 一个请求，请求就可以结束。知道 <code>actor</code> 完成，<code>Future</code> 会再次被触发从而获取处理结果。</p>
<h3 id="Actor-类"><a href="#Actor-类" class="headerlink" title="Actor 类"></a>Actor 类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GreetingService</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">greet</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello, "</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope</span>(ConfigurableBeanFactory.SCOPE_PROTOTYPE)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GreetingActor</span> <span class="keyword">extends</span> <span class="title">UntypedActor</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> GreetingService greetingService;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// constructor</span></span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Object message)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (message <span class="keyword">instanceof</span> Greet) &#123;</span><br><span class="line">            String name = ((Greet) message).getName();</span><br><span class="line">            getSender().tell(greetingService.greet(name), getSelf());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            unhandled(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Greet</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// standard constructors/getters</span></span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用-Actor"><a href="#使用-Actor" class="headerlink" title="使用 Actor"></a>使用 Actor</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ActorRef greeter = system.actorOf(SPRING_EXTENSION_PROVIDER.get(system)</span><br><span class="line">  .props(<span class="string">"greetingActor"</span>), <span class="string">"greeter"</span>);</span><br><span class="line"> </span><br><span class="line">FiniteDuration duration = FiniteDuration.create(<span class="number">1</span>, TimeUnit.SECONDS);</span><br><span class="line">Timeout timeout = Timeout.durationToTimeout(duration);</span><br><span class="line"> </span><br><span class="line">Future&lt;Object&gt; result = ask(greeter, <span class="keyword">new</span> Greet(<span class="string">"John"</span>), timeout);</span><br><span class="line"> </span><br><span class="line">Assert.assertEquals(<span class="string">"Hello, John"</span>, Await.result(result, duration));</span><br></pre></td></tr></table></figure>
<h2 id="扩展场景设计"><a href="#扩展场景设计" class="headerlink" title="扩展场景设计"></a>扩展场景设计</h2><p>该场景十分简单，我们假定需要设计一个扫码登录的功能，我们抛去细节，只关注核心，实际上这个核心主要有三个 <code>API</code>。</p>
<ol>
<li>初始登陆过程，比如我们打开微信网页版</li>
<li><code>polling</code> 的过程，这个过程是不断判断是否用户完成了扫码并点击确认授权</li>
<li>授权过程，这个 <code>API</code> 模拟了用户完成扫码，这时候 <code>polling api</code> 结束，并返回扫码后的结果。</li>
</ol>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Akka/" rel="tag"># Akka</a>
          
            <a href="/tags/Actor/" rel="tag"># Actor</a>
          
            <a href="/tags/Spring-Boot/" rel="tag"># Spring-Boot</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/07/23/study-driving-licence-in-uk-6/" rel="next" title="英国学车记第六课">
                <i class="fa fa-chevron-left"></i> 英国学车记第六课
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/30/study-driving-licence-in-uk-7/" rel="prev" title="英国学车记第七课">
                英国学车记第七课 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
      
        
          <ul class="sidebar-nav motion-element">
            <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
              文章目录
            </li>
            <li class="sidebar-nav-overview" data-target="site-overview">
              站点概览
            </li>
          </ul>
        
      



      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar-2.jpg"
               alt="Xin Meng" />
          <p class="site-author-name" itemprop="name">Xin Meng</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">152</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">162</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/xmeng1" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/xinmeng_1" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/michealmeng" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/xinmeng1" target="_blank" title="Linkedin">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                  Linkedin
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/mengxin.city" target="_blank" title="Facebook">
                  
                    <i class="fa fa-fw fa-facebook"></i>
                  
                  Facebook
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://douban.com/people/xinmeng1" target="_blank" title="Douban">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Douban
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/xinmeng1" target="_blank" title="Zhihu">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Zhihu
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Next
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://theme-next.iissnan.com" title="Title" target="_blank">Title</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>
      
        
        <!--noindex-->
          <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
            <div class="post-toc">

              
                
              

              
                <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-集成-AKKA"><span class="nav-number">1.</span> <span class="nav-text">Spring 集成 AKKA</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#依赖注入简介"><span class="nav-number">1.1.</span> <span class="nav-text">依赖注入简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#maven-依赖"><span class="nav-number">1.2.</span> <span class="nav-text">maven 依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#将-ActorSystem-集成到-Spring-ApplicationContext中"><span class="nav-number">1.3.</span> <span class="nav-text">将 ActorSystem 集成到 Spring ApplicationContext中</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#构造-SpringActorProducer"><span class="nav-number">1.3.1.</span> <span class="nav-text">构造 SpringActorProducer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建-Spring-的-AKKA-扩展"><span class="nav-number">1.3.2.</span> <span class="nav-text">创建 Spring 的 AKKA 扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建-Spring-配置类"><span class="nav-number">1.3.3.</span> <span class="nav-text">创建 Spring 配置类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-使用-AKKA"><span class="nav-number">1.4.</span> <span class="nav-text">Spring 使用 AKKA</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Actor-类"><span class="nav-number">1.4.1.</span> <span class="nav-text">Actor 类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-Actor"><span class="nav-number">1.4.2.</span> <span class="nav-text">使用 Actor</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#扩展场景设计"><span class="nav-number">1.5.</span> <span class="nav-text">扩展场景设计</span></a></li></ol></li></ol></div>
              

            </div>
          </section>
        <!--/noindex-->
        
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2017 - 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xin Meng</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://mengxin.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'https://notes.mengxin.science/2018/07/27/spring-boot-akka-async-request/';
          this.page.identifier = '2018/07/27/spring-boot-akka-async-request/';
          this.page.title = 'Spring Boot 集成 Akka 并是实现异步请求';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://mengxin.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  





  






  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.1"></script>



  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        },
        TeX: { equationNumbers: { autoNumber: "AMS" }}
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

</body>
</html>
